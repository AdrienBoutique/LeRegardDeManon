<section class="admin-settings stack">
  <header class="card panel">
    <h1>Reglages</h1>
    <p>Mode de validation des demandes de rendez-vous.</p>
  </header>

  @if (errorMessage()) {
    <article class="card panel error-box">{{ errorMessage() }}</article>
  }
  @if (successMessage()) {
    <article class="card panel success-box">{{ successMessage() }}</article>
  }

  <article class="card panel">
    @if (loading()) {
      <p>Chargement...</p>
    } @else {
      <div class="mode-grid">
        <button
          type="button"
          class="mode-card"
          [class.active]="bookingMode() === 'MANUAL'"
          [disabled]="saving()"
          (click)="save('MANUAL')"
        >
          <h2>Validation manuelle</h2>
          <p>Toute demande arrive en attente puis est validee par l'administration.</p>
        </button>

        <button
          type="button"
          class="mode-card"
          [class.active]="bookingMode() === 'AUTO_INTELLIGENT'"
          [disabled]="saving()"
          (click)="save('AUTO_INTELLIGENT')"
        >
          <h2>Auto-confirmation intelligente</h2>
          <p>Confirmation automatique si creneau disponible, sinon la demande passe en attente.</p>
        </button>
      </div>

      <div class="toggle-row">
        <label class="check-row">
          <input
            type="checkbox"
            [checked]="showAvailabilityDots()"
            [disabled]="saving()"
            (change)="saveShowAvailabilityDots($any($event.target).checked)"
          />
          Afficher les points de disponibilite sur le calendrier de reservation
        </label>
        <p class="hint">Decoche pour masquer les boules de disponibilite cote cliente.</p>
      </div>
    }
  </article>
</section>
